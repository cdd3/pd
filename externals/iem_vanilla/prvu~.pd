#N canvas 163 215 1287 602 10;
#X obj 28 63 inlet~;
#X obj 29 101 *~;
#X text 56 101 square;
#X obj 253 398 block~ 2048 1 1;
#X msg 253 364 set \$1 1 1;
#X text 28 42 sig.in~;
#X obj 234 68 inlet;
#X obj 234 182 f \$1;
#X obj 375 184 f \$2;
#N canvas 0 50 538 499 ms_to_samp_2^n 0;
#N canvas 0 50 450 384 round_to_2^n 0;
#X obj 53 50 inlet;
#X obj 53 119 sel 0;
#X msg 53 140 64;
#X obj 80 163 moses 1;
#X obj 273 114 loadbang;
#X msg 242 140 2;
#X obj 242 162 expr 1 / log10($f1);
#X obj 119 186 expr log10($f1) * $f2;
#X obj 119 230 int;
#X obj 119 259 expr pow(2 \, $f1);
#X obj 119 284 outlet;
#X obj 53 77 t f b, f 31;
#X obj 119 208 + 0.49;
#X connect 0 0 11 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 3 0;
#X connect 3 1 7 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 1;
#X connect 7 0 12 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 11 0 1 0;
#X connect 11 1 5 0;
#X connect 12 0 8 0;
#X restore 80 196 pd round_to_2^n;
#X obj 160 93 samplerate~;
#X obj 160 119 * 0.001;
#X obj 80 152 * 44.1;
#X obj 80 174 clip 64 132000;
#X obj 156 286 / 44.1, f 13;
#X obj 80 313 outlet;
#X obj 78 39 inlet;
#X text 78 333 samples;
#X obj 156 314 outlet;
#X text 164 334 ms;
#X obj 79 68 t f b, f 12;
#X obj 81 246 t f f, f 7;
#X connect 0 0 12 0;
#X connect 1 0 2 0;
#X connect 2 0 3 1;
#X connect 2 0 5 1;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 9 0;
#X connect 7 0 11 0;
#X connect 11 0 3 0;
#X connect 11 1 1 0;
#X connect 12 0 6 0;
#X connect 12 1 5 0;
#X restore 234 259 pd ms_to_samp_2^n;
#X obj 581 317 t b b, f 27;
#X obj 581 483 outlet;
#X text 579 506 rms + peak dB;
#X obj 581 461 pack 0 0, f 27;
#X obj 581 416 powtodb;
#X obj 581 439 - 100;
#X obj 740 437 - 100;
#X obj 517 231 * 0.5;
#X obj 333 285 t f f, f 21;
#N canvas 75 287 706 270 pow_rms_release 0;
#X obj 49 213 outlet;
#X obj 49 42 inlet;
#X obj 49 66 t f b, f 12;
#X obj 130 143 f;
#X obj 574 29 inlet;
#X msg 574 81 0;
#X obj 451 30 inlet;
#X obj 574 53 t b;
#X obj 268 42 inlet;
#X obj 349 149 expr exp(-1*$f1/$f2);
#X obj 453 120 t b f;
#X text 575 12 reset;
#X text 228 19 display sampling time;
#X text 46 23 new pow value;
#X obj 349 194 expr 1 - $f1;
#X obj 49 160 +;
#X text 435 11 TAU-release;
#X text 446 194 (1-a);
#X text 501 150 a;
#X text 322 230 y[n] = (1-a)*x[n] + a*y[n-1];
#X obj 130 172 * 0.911303;
#X obj 49 100 * 0.088697;
#X connect 1 0 2 0;
#X connect 2 0 21 0;
#X connect 2 1 3 0;
#X connect 3 0 20 0;
#X connect 4 0 7 0;
#X connect 5 0 3 1;
#X connect 6 0 10 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 14 0;
#X connect 9 0 20 1;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 14 0 21 1;
#X connect 15 0 3 1;
#X connect 15 0 0 0;
#X connect 20 0 15 1;
#X connect 21 0 15 0;
#X restore 581 392 pd pow_rms_release;
#N canvas 363 148 793 777 pow_peak_hold_release 0;
#X obj 104 702 outlet;
#X obj 49 42 inlet;
#X obj 49 68 t f b;
#X obj 81 120 f;
#X obj 49 127 max;
#X obj 714 22 inlet;
#X msg 579 232 0;
#X obj 451 30 inlet;
#X obj 319 38 inlet;
#X obj 323 118 expr exp(-1*$f1/$f2);
#X obj 451 59 t b f;
#X text 715 5 reset;
#X text 267 17 display sampling time;
#X text 46 23 new peak value;
#X obj 542 29 inlet;
#X text 540 10 hold-time;
#X text 436 11 TAU-release;
#X text 91 167 new peak or release slope;
#X obj 78 278 >;
#X obj 76 222 t f b, f 9;
#X obj 136 253 f, f 6;
#X obj 78 303 sel 1;
#X obj 47 196 t f f f, f 9;
#X obj 77 357 f, f 4;
#X obj 134 442 change -1;
#X msg 169 548 0;
#X msg 132 549 1;
#X obj 134 500 sel 1;
#X obj 168 525 t b;
#X obj 138 615 != 0;
#X obj 141 586 t f f;
#X obj 176 614 == 0;
#X obj 135 649 spigot 1;
#X obj 59 650 spigot 0;
#X obj 78 327 t b b, f 9;
#X obj 104 678 t f;
#X msg 168 412 0;
#X msg 133 413 1;
#X msg 191 356 stop;
#X obj 137 354 t b b;
#X text 245 383 monoflop;
#X obj 714 46 t b b;
#X obj 168 382 del 1000;
#X obj 81 144 * 0.911303;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 3 0 43 0;
#X connect 4 0 3 1;
#X connect 4 0 22 0;
#X connect 5 0 41 0;
#X connect 6 0 3 1;
#X connect 6 0 4 1;
#X connect 6 0 24 0;
#X connect 6 0 20 1;
#X connect 6 0 35 0;
#X connect 6 0 23 1;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 9 0 43 1;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 14 0 42 1;
#X connect 18 0 21 0;
#X connect 19 0 18 0;
#X connect 19 1 20 0;
#X connect 20 0 18 1;
#X connect 21 0 34 0;
#X connect 22 0 32 0;
#X connect 22 1 19 0;
#X connect 22 2 23 1;
#X connect 23 0 33 0;
#X connect 24 0 27 0;
#X connect 25 0 30 0;
#X connect 26 0 30 0;
#X connect 27 0 26 0;
#X connect 27 1 28 0;
#X connect 28 0 25 0;
#X connect 29 0 33 1;
#X connect 30 0 29 0;
#X connect 30 1 31 0;
#X connect 31 0 32 1;
#X connect 32 0 35 0;
#X connect 33 0 35 0;
#X connect 34 0 23 0;
#X connect 34 1 39 0;
#X connect 35 0 0 0;
#X connect 35 0 20 1;
#X connect 36 0 24 0;
#X connect 37 0 24 0;
#X connect 38 0 42 0;
#X connect 39 0 37 0;
#X connect 39 1 42 0;
#X connect 41 0 6 0;
#X connect 41 1 38 0;
#X connect 42 0 36 0;
#X connect 43 0 4 1;
#X restore 740 389 pd pow_peak_hold_release;
#X obj 740 413 powtodb;
#X obj 581 369 / 2048;
#X obj 581 290 bang~;
#X obj 280 106 loadbang;
#X msg 84 367 const 0;
#X obj 234 286 t f f f;
#X obj 84 341 t b f, f 11;
#X msg 147 368 resize \$1;
#X obj 517 179 f \$3;
#X obj 234 154 route metro_time_ms peak_hold_time_ms release_time_ms
reset, f 95;
#X text 484 248 because of power;
#X obj 280 129 t b b b, f 47;
#X text 845 184 (periode between 2 output-events);
#X text 843 222 (repeat the peak on output until peakholdtime);
#X text 844 261 (output_level decrements by about 8.6 dB = 63% during
this time), f 67;
#X text 821 210 2.) arg: <float> peak-hold-time [ms] (default: 1000
ms), f 58;
#X text 822 248 3.) arg: <float> rms-and-peak-release-time [ms] (default:
300 ms), f 69;
#X text 16 7 prvu~;
#X text 235 42 control-messages: metro_time_ms <float> \, peak_hold_time_ms
<float> \, release_time_ms <float> \, reset <bang>, f 107;
#X obj 30 127 tabsend~ \$0-pow;
#X obj 84 401 array define \$0-pow 2048;
#X obj 740 343 array max \$0-pow;
#X obj 581 341 array sum \$0-pow;
#X text 991 464 IEM KUG;
#X text 975 452 musil;
#X text 1005 452 @;
#X text 1011 452 iem.at;
#X text 974 474 Graz \, Austria;
#X text 986 428 iem_vanilla;
#X text 926 441 (c) Thomas Musil 2000 - 2019;
#N canvas 0 50 450 300 default 0;
#X obj 55 47 inlet;
#X obj 55 76 sel 0;
#X obj 55 201 outlet;
#X obj 55 155 clip 1 100000;
#X msg 55 111 46;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 3 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X restore 234 207 pd default 46;
#N canvas 0 50 450 300 default 0;
#X obj 55 47 inlet;
#X obj 55 76 sel 0;
#X obj 55 201 outlet;
#X obj 55 155 clip 1 100000;
#X msg 55 111 500;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 3 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X restore 375 207 pd default 500;
#N canvas 0 50 450 300 default 0;
#X obj 55 47 inlet;
#X obj 55 76 sel 0;
#X obj 55 201 outlet;
#X obj 55 155 clip 1 100000;
#X msg 55 111 100;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 3 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X restore 517 205 pd default 100;
#X msg 659 439 -100 -100;
#X obj 659 204 t f b, f 13;
#X obj 659 229 sel 1;
#N canvas 0 50 488 328 if_double_click_reset 0;
#X obj 65 43 inlet;
#X obj 63 168 outlet;
#X obj 64 108 timer;
#X obj 64 79 t b b;
#X obj 64 137 < 300;
#X connect 0 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 3 1 2 1;
#X connect 4 0 1 0;
#X restore 659 179 pd if_double_click_reset;
#N canvas 570 18 617 458 (subpatch) 0;
#X obj 100 100 cnv 1 2 2 empty empty empty 20 12 0 14 -262144 -66577
0;
#X obj 119 13 loadbang;
#X obj 138 194 spigot 1;
#X msg 119 72 1;
#X obj 183 171 == 0;
#X obj 109 148 v;
#X obj 183 149 v;
#X obj 119 37 t b b b b;
#N canvas 0 50 450 336 (subpatch) 0;
#X msg 122 226 set \$1;
#X obj 112 248 makefilename;
#X obj 122 183 symbol;
#X obj 90 161 t f b;
#X obj 112 88 list append;
#X obj 112 111 list split 1;
#X obj 112 61 until;
#X obj 193 136 t b b;
#X obj 112 37 t b l b;
#X msg 161 161 symbol;
#X obj 128 271 symbol;
#X obj 122 205 makefilename %s%%c;
#X obj 112 16 inlet;
#X obj 128 294 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 1;
#X connect 1 0 10 1;
#X connect 2 0 11 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 5 1 4 1;
#X connect 5 2 7 0;
#X connect 6 0 4 0;
#X connect 7 0 10 0;
#X connect 7 1 6 1;
#X connect 8 0 6 0;
#X connect 8 1 4 0;
#X connect 8 2 9 0;
#X connect 9 0 2 1;
#X connect 10 0 13 0;
#X connect 11 0 0 0;
#X connect 12 0 8 0;
#X restore 185 101 pd;
#X msg 185 69 107 54 74 53 98 56 118 50 99 49 108 48 120 53 70 54 105
51 109 56 74 54 114 52 100 51;
#X obj 138 335 route 1;
#X msg 138 315 1 \$1;
#X obj 138 356 print -n;
#N canvas 0 50 776 769 (subpatch) 0;
#X msg 123 510 set \$1;
#X obj 121 540 makefilename;
#X obj 123 467 symbol;
#X obj 81 439 t f b;
#X obj 112 88 list append;
#X obj 112 111 list split 1;
#X obj 112 61 until;
#X obj 194 420 t b b;
#X obj 112 37 t b l b;
#X msg 162 445 symbol;
#X obj 142 567 symbol;
#X obj 123 489 makefilename %s%%c;
#X obj 112 16 inlet;
#X obj 142 590 outlet;
#X obj 90 135 moses 0;
#X obj 86 177 * -1;
#X obj 84 206 t f b;
#X obj 107 305 spigot 0;
#X obj 87 277 spigot 1;
#X msg 122 245 0;
#X msg 167 276 1;
#X obj 100 363 f;
#X msg 198 276 0;
#X msg 152 245 1;
#X obj 99 385 until;
#X obj 108 326 t b b f;
#X obj 123 411 f;
#X obj 157 181 f;
#X obj 187 161 + 1;
#X obj 186 183 % 23;
#X obj 133 159 t f b;
#X obj 133 206 -, f 9;
#X msg 218 160 17;
#X connect 0 0 1 0;
#X connect 1 0 2 1;
#X connect 1 0 10 1;
#X connect 2 0 11 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 5 0 14 0;
#X connect 5 1 4 1;
#X connect 5 2 7 0;
#X connect 6 0 4 0;
#X connect 7 0 10 0;
#X connect 7 1 6 1;
#X connect 8 0 6 0;
#X connect 8 1 4 0;
#X connect 8 2 9 0;
#X connect 8 2 32 0;
#X connect 9 0 2 1;
#X connect 10 0 13 0;
#X connect 11 0 0 0;
#X connect 12 0 8 0;
#X connect 14 0 15 0;
#X connect 14 1 30 0;
#X connect 15 0 16 0;
#X connect 16 0 21 1;
#X connect 16 1 19 0;
#X connect 16 1 20 0;
#X connect 17 0 25 0;
#X connect 18 0 3 0;
#X connect 19 0 18 1;
#X connect 20 0 17 1;
#X connect 21 0 24 0;
#X connect 22 0 17 1;
#X connect 23 0 18 1;
#X connect 24 0 26 0;
#X connect 25 0 22 0;
#X connect 25 0 23 0;
#X connect 25 1 21 0;
#X connect 25 2 26 1;
#X connect 26 0 3 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 29 0 27 1;
#X connect 29 0 31 1;
#X connect 30 0 31 0;
#X connect 30 1 27 0;
#X connect 31 0 18 0;
#X connect 31 0 17 0;
#X connect 32 0 28 0;
#X restore 138 294 pd;
#X msg 138 217 143 -36 62 31 146 -13 32 106 103 112 99 123 103 117
113 117 118 108 22 137 46 47 48 57 117 60 52 53 106 104 112 111 100
119 37 83 124 123 114 118 43 62 61 62 63 48 62 50 69 68 70 79 10 125
34 35 36 114 123 122 113 117 74 116 113 122 60 112 132 49 50 51 93
90 99 32 76 87 74 48 37 77 121 105 131 20 50 -36 54;
#X connect 1 0 7 0;
#X connect 2 0 14 0;
#X connect 3 0 5 0;
#X connect 4 0 2 1;
#X connect 6 0 4 0;
#X connect 7 0 3 0;
#X connect 7 1 2 0;
#X connect 7 2 6 0;
#X connect 7 3 9 0;
#X connect 8 0 6 1;
#X connect 8 0 5 1;
#X connect 9 0 8 0;
#X connect 10 0 12 0;
#X connect 11 0 10 0;
#X connect 13 0 11 0;
#X connect 14 0 13 0;
#X coords 0 -1 1 1 1 1 2 100 100;
#X restore 51 5 pd;
#X text 90 7 peak-rms-vu-meter-converter;
#X text 822 172 1.) arg: <float> metro-time = display-refresh-time
[ms] (default: 46 ms), f 73;
#X connect 0 0 1 0;
#X connect 0 0 1 1;
#X connect 1 0 40 0;
#X connect 4 0 3 0;
#X connect 6 0 30 0;
#X connect 7 0 51 0;
#X connect 8 0 52 0;
#X connect 9 0 26 0;
#X connect 9 1 18 0;
#X connect 10 0 43 0;
#X connect 10 1 42 0;
#X connect 13 0 11 0;
#X connect 14 0 15 0;
#X connect 15 0 13 0;
#X connect 16 0 13 1;
#X connect 17 0 20 2;
#X connect 17 0 19 2;
#X connect 18 0 19 1;
#X connect 18 1 20 1;
#X connect 19 0 14 0;
#X connect 20 0 21 0;
#X connect 21 0 16 0;
#X connect 22 0 19 0;
#X connect 23 0 10 0;
#X connect 24 0 32 0;
#X connect 25 0 41 0;
#X connect 26 0 27 0;
#X connect 26 1 4 0;
#X connect 26 2 22 1;
#X connect 27 0 25 0;
#X connect 27 1 28 0;
#X connect 28 0 41 0;
#X connect 29 0 53 0;
#X connect 30 0 7 0;
#X connect 30 1 8 0;
#X connect 30 2 29 0;
#X connect 30 3 57 0;
#X connect 32 0 7 0;
#X connect 32 1 8 0;
#X connect 32 2 29 0;
#X connect 42 0 20 0;
#X connect 43 0 22 0;
#X connect 51 0 9 0;
#X connect 52 0 20 3;
#X connect 53 0 17 0;
#X connect 54 0 13 0;
#X connect 55 0 56 0;
#X connect 55 1 20 4;
#X connect 55 1 19 3;
#X connect 56 0 54 0;
#X connect 57 0 55 0;
